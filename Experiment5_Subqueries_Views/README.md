# Experiment 5: Subqueries and Views
# Name: SANJEV R M
# Reference Number: 212223040186
## AIM
To study and implement subqueries and views.

## THEORY

### Subqueries
A subquery is a query inside another SQL query and is embedded in:
- WHERE clause
- HAVING clause
- FROM clause

**Types:**
- **Single-row subquery**:
  Sub queries can also return more than one value. Such results should be made use along with the operators in and any.
- **Multiple-row subquery**:
  Here more than one subquery is used. These multiple sub queries are combined by means of ‘and’ & ‘or’ keywords.
- **Correlated subquery**:
  A subquery is evaluated once for the entire parent statement whereas a correlated Sub query is evaluated once per row processed by the parent statement.

**Example:**
```sql
SELECT * FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);
```
### Views
A view is a virtual table based on the result of an SQL SELECT query.
**Create View:**
```sql
CREATE VIEW view_name AS
SELECT column1, column2 FROM table_name WHERE condition;
```
**Drop View:**
```sql
DROP VIEW view_name;
```

**Question 1**
--
From the following tables write a SQL query to find all orders generated by New York-based salespeople. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.
```sql
select * from orders where salesman_id in (select salesman_id from salesman where city="New York");
```

**Output:**

![image](https://github.com/user-attachments/assets/19d238ca-9c30-4997-9059-5c133735c949)

**Question 2**
---
Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is EQUAL TO $1500.
```sql
select * from customers where salary=1500;
```

**Output:**

![image](https://github.com/user-attachments/assets/141645bb-ef8e-42e1-9b04-dd6e5f0f7fc8)

**Question 3**
---
Write a SQL query to Identify customers whose city is different from the city of the customer with the highest ID

```sql
select * from customer where city != (select city from customer where id=(select max(id) from customer));
```

**Output:**

![image](https://github.com/user-attachments/assets/c3cf9089-b2f8-4469-a8e4-e8867492951b)

**Question 4**
---
Write a SQL query to Retrieve the medications with dosages equal to the lowest dosage
```sql
select * from medications where dosage =(select min(dosage) from medications);
```

**Output:**

![image](https://github.com/user-attachments/assets/cd479340-e517-47cf-a1e7-3620b96ef718)

**Question 5**
---
From the following tables, write a SQL query to determine the commission of the salespeople in Paris. Return commission.
```sql
select commission from salesman where salesman_id in (select salesman_id from customer where city="Paris" );
```

**Output:**

![image](https://github.com/user-attachments/assets/0d7a9cc8-4c94-4d03-a2ad-f78734324e20)

**Question 6**
---
Write a SQL query that retrieves the all the columns from the Table Grades, where the grade is equal to the minimum grade achieved in each subject.

```sql
select * from grades g1 where grade=(select min(grade) from grades g2 where g2.subject=g1.subject);

```

**Output:**

![image](https://github.com/user-attachments/assets/793804a3-06c3-4148-9d29-6bf725d137fb)

**Question 7**
---
From the following tables write a SQL query to find all orders generated by London-based salespeople. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

```sql
select * from orders where salesman_id in (select salesman_id from salesman where city="London");
```

**Output:**

![image](https://github.com/user-attachments/assets/52cde73b-e250-4b87-8f74-68057600aebb)


**Question 8**
---
From the following tables write a SQL query to find the order values greater than the average order value of 10th October 2012. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

```sql
select * from orders where purch_amt> (select avg(purch_amt) from orders where ord_date="2012-10-10");
```

**Output:**

![image](https://github.com/user-attachments/assets/3d46d885-327e-4c56-b74c-ca1cd7c00ff5)

**Question 9**
---
Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is greater than $4500.

```sql
select * from customers where salary>4500;
```

**Output:**

![image](https://github.com/user-attachments/assets/9b77c25b-5d80-4c1c-af23-e675ba796d7e)

**Question 10**
---
Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is greater than $1500.

```sql
select * from customers where salary>1500;
```

**Output:**

![image](https://github.com/user-attachments/assets/50b4f796-2ba4-4a3f-bbf7-a99f9ebc1420)

## RESULT
Thus, the SQL queries to implement subqueries and views have been executed successfully.
